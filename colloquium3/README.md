# Вопросы по шаблонам проектирования и архитектуре ПО

## 1. Классические поведенческие шаблоны проектирования

**Определение:**
Поведенческие шаблоны определяют эффективные способы взаимодействия объектов и распределения ответственности между ними, используя принципы инкапсуляции, разделения обязанностей и ортогональности.

**Ключевые аспекты:**

- **Инкапсуляция:** Сокрытие деталей реализации поведения
- **Разделяй и властвуй:** Декомпозиция сложного поведения
- **Ортогональность:** Независимость компонентов поведения

**Примеры шаблонов и многопоточность:**

1. **Наблюдатель (Observer):**

   - Проблема: Жесткая связь между издателем и подписчиками
   - Решение: Слабая связь через интерфейсы
   - Многопоточность: Требует синхронизации при уведомлениях

2. **Состояние (State):**

   - Проблема: Множество условных переходов между состояниями
   - Решение: Инкапсуляция состояний в отдельные классы
   - Многопоточность: Состояние должно быть thread-safe

3. **Цепочка обязанностей (Chain of Responsibility):**
   - Проблема: Жесткая привязка обработчиков запросов
   - Решение: Динамическая цепочка обработчиков
   - Многопоточность: Каждый обработчик может работать в своем потоке

## 2. Шаблоны: Команда, Стратегия, Шаблонный метод

### Команда (Command)

**Проблема:** Прямое вызовы действий приводят к жесткой связности
**Решение:**

```java
interface Command {
    void execute();
    void undo();
}
```

Примеры:

1. Операции в текстовом редакторе
2. Транзакции БД
3. Управление умным домом

### Стратегия (Strategy)

**Проблема:** Множество ветвлений в одном алгоритме
**Решение:**

```java
interface SortStrategy {
    void sort(List<?> items);
}
```

Примеры:

1. Алгоритмы сортировки
2. Способы оплаты
3. Политики кэширования

### Шаблонный метод (Template Method)

**Проблема:** Дублирование кода в похожих алгоритмах
**Решение:**

```java
abstract class Game {
    final void play() {
        initialize();
        start();
        end();
    }
    abstract void initialize();
}
```

Примеры:

1. Фреймворки тестирования
2. Игровые движки
3. Генераторы отчетов

## 3. Архитектура ПО и многопоточность

**Архитектура ПО** - это:

- Фундаментальная организация системы
- Набор значимых решений о:
  - Структуре компонентов
  - Их взаимодействии
  - Принципах масштабирования и эволюции

**Влияние многопоточности:**

1. **Сложности:**

   - Гонки данных (Race conditions)
   - Взаимные блокировки (Deadlocks)
   - Активные ожидания (Livelocks)

2. **Архитектурные подходы:**

   - Immutable объекты
   - Акторная модель (Actor model)
   - Реактивные потоки (Reactive streams)

3. **Паттерны:**
   - Producer-Consumer с очередями
   - Thread Pool
   - Read-Write Lock

**Пример архитектуры с многопоточностью:**

[Клиенты] → [Баланировщик нагрузки] → [Микросервисы (пул потоков)]
↓
[Сервис мониторинга (асинхронные события)]
